{"ast":null,"code":"import _objectSpread from\"/Users/maveen/Documents/Notesapp/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/maveen/Documents/Notesapp/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/maveen/Documents/Notesapp/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/maveen/Documents/Notesapp/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(_ref){var match=_ref.match,history=_ref.history;var noteId=match.params.id;//This is gonna give us the note id\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[noteId]);var getNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(noteId,\"/\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);// updating the state\ncase 9:case\"end\":return _context.stop();}},_callee);}));return function getNote(){return _ref2.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:fetch(\"/api/notes/create/\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}},_callee2);}));return function createNote(){return _ref3.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/update/\"),{method:\"PUT\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context3.stop();}},_callee3);}));return function updateNote(){return _ref4.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/delete/\"),{method:\"DELETE\",'headers':{'Content-Type':'application/json'}});history.push('/');case 2:case\"end\":return _context4.stop();}},_callee4);}));return function deleteNote(){return _ref5.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!=='new'&&note.body===''){deleteNote();}else if(noteId!=='new'){updateNote();}else if(noteId==='new'&&note.body!==null){createNote();}history.push('/');};var handleChange=function handleChange(value){setNote(function(note){return _objectSpread(_objectSpread({},note),{},{'body':value});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{onClick:handleSubmit,children:/*#__PURE__*/_jsx(ArrowLeft,{})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","ReactComponent","ArrowLeft","NotePage","match","history","noteId","params","id","note","setNote","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","updateNote","deleteNote","push","handleSubmit","handleChange","value","e","target"],"sources":["/Users/maveen/Documents/Notesapp/mynotes/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\n\nconst NotePage = ({ match, history }) => {\n\n    let noteId = match.params.id //This is gonna give us the note id\n\n    let [note, setNote] = useState(null)\n\n    useEffect(() => {\n        getNote()\n\n    }, [noteId])\n\n    let getNote = async () => { // this is gonna call the db\n        if (noteId === 'new') return\n\n        let response = await fetch(`/api/notes/${noteId}/`) // we are getting the note id from url and then making the request\n        let data = await response.json()\n        setNote(data) // updating the state\n    }\n    let createNote = async () => {\n        fetch(`/api/notes/create/`, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(note)\n        })\n\n    }\n\n    let updateNote = async () => {\n        fetch(`/api/notes/${noteId}/update/`, {\n            method: \"PUT\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(note)\n        })\n\n    }\n\n    let deleteNote = async () => {\n        fetch(`/api/notes/${noteId}/delete/`, {\n            method: \"DELETE\",\n            'headers': {\n                'Content-Type': 'application/json'\n            }\n        })\n\n        history.push('/')\n    }\n\n    let handleSubmit = () => {\n        if (noteId !== 'new' && note.body === '') {\n            deleteNote()\n        } else if (noteId !== 'new') {\n            updateNote()\n        } else if (noteId === 'new' && note.body !== null) {\n            createNote()\n        }\n        history.push('/')\n    }\n\n    let handleChange = (value) => {\n        setNote(note => ({ ...note, 'body': value }))\n\n\n    }\n\n    return (\n        <div className=\"note\">\n            <div className=\"note-header\">\n\n                <h3 onClick={handleSubmit}><ArrowLeft /></h3>\n                {noteId !== 'new' ? (\n                    <button onClick={deleteNote}>Delete</button>\n                ) : (\n                    <button onClick={handleSubmit} >Done</button>\n                )}\n\n\n\n            </div>\n            {/* onChange: as every change we are calling the onChange method and we are updating the state */}\n            <textarea onChange={(e) => { handleChange(e.target.value) }} value={note?.body}></textarea>\n        </div >\n    )\n}\n\nexport default NotePage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}